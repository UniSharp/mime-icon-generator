//VARS

//Colors (used when another color isn't specified)
$icon-colours: 
	hsl(5, 75%, 55%),
	hsl(35, 95%, 50%),
	hsl(50, 90%, 50%),
	hsl(65, 65%, 52%),
	hsl(90, 55%, 51%),
	hsl(120, 35%, 50%),
	hsl(152, 55%, 40%),
	hsl(172, 55%, 40%),
	hsl(200, 65%, 51%),
	hsl(224, 70%, 60%),
	hsl(254, 46%, 58%),
	hsl(280, 46%, 52%),
	hsl(340, 65%, 52%);

// Icons (the corrispong ascii)
$flag: "\E3A0";
$music: "\E3A1";
$photo: "\E3B0";
$picture: "\E3B7";
$play: "\E037";
$movie: "\E02C";
$cam: "\E04B";
$stylez: "\E91D";
$epub: "\E54B";
$map: "\E8B4";
$coffee: "\EB44";
$mic: "\E029";
$radio: "\E03E";
$audio: "\E050";
$lp: "\E019";
$work: "\E8F9";
$calendar: "\E8DF";
$settings: "\E8B8";
$malware: "\E868";
$build: "\E869";
$assignment: "\E85E";
$locked: "\E88D";
$text: "\E262";
$app: "\E051";
$code: "\E86F";
$apk: "\E859";
$usb: "\E1E0";
$cloud: "\E3DD";
$attachment: "\E2BC";
$zip: "\E3E7";

// icons to generate

// icon with google font icons
$list2:
(test2, aac,  "", $audio),
(test2, abw,  "", $music),
(test2, arc,  "", $photo),
(test2, apk,  "", $apk),
(test2, azw,  "", $picture),
(test2, avi,  "", $play),
(test2, bin,  "", $calendar),
(test2, bz,   "", $zip),
(test2, bz2,  "", $map),
(test2, csh,  "", $coffee),
(test2, css,  "", $movie),
(test2, csv,  "", $radio),
(test2, doc,  hsl(210, 90%, 40%), $text),
(test2, eot,  "", $work),
(test2, epub, "", $epub),
(test2, gif,  "", $settings),
(test2, html, "", $code),
(test2, ico,  "", $app),
(test2, ics,  "", $assignment),
(test2, usb,  "", $usb),
(test2, js,  "", $malware),
(test2, jar,  "", $mic),
(test2, txt,  "", $text),
(test3, aac,  "", $flag),
(test3, abw,  "", $cam),
(test3, arc,  "", $photo),
(test3, azw,  "", $picture),
(test3, apk,  "", $apk),
(test3, avi,  "", $play),
(test3, bin,  "", $stylez),
(test3, bz,   "", $epub),
(test3, bz2,  "", $cloud),
(test3, csh,  hsl(20, 20%, 45%), $coffee),
(test3, css,  "", $code),
(test3, csv,  "", $attachment),
(test3, doc,  "", $lp),
(test3, eot,  "", $work),
(test3, epub, "", $calendar),
(test3, gif,  "", $settings),
(test3, html, "", $code),
(test3, ico,  "", $build),
(test3, ics,  "", $assignment),
(test3, usb,  hsl(220, 5%, 30%), $usb),
(test3, jar,  "", $locked),
(test3, js,  "", $malware),
(test3, txt,  "", $text);
$icon-color: #F1F2F2;
$font-size: 39.5;

// svg used in the svg mass generated icons
$text-icon: '<path display="inline" opacity="0.8" fill="#{$icon-color}" d="M50.2,70.6v7.5h99.2v-7.5H50.2z M50.2,93v7.5h99.2V93H50.2z M50.2,115.4v7.5h49.6v-7.5 H50.2z"/>';
$music-icon: '<path display="inline" opacity="0.8" fill="#{$icon-color}" d="M127.9,66.6c-0.4-0.4-0.9-0.5-1.5-0.4L93,70.6c-0.9,0.1-1.6,0.9-1.6,1.8V79v2.7v26.8 c-2.2-1.9-5.1-3.1-8.4-3.1c-6.7,0-12.1,4.9-12.1,10.9c0,6,5.4,10.9,12.1,10.9s12.1-4.9,12.1-10.9V83.3l29.7-3.9v19.3 c-2.1-1.8-4.9-2.9-8-2.9c-6.5,0-11.8,4.8-11.8,10.7s5.3,10.7,11.8,10.7c6.5,0,11.8-4.8,11.8-10.7V77.3v-2.7V68 C128.5,67.5,128.3,67,127.9,66.6z"/>';
$zip-icon: '<g transform="translate(0 -1028.4)" display="inline"><g transform="translate(5)"><path fill="#364A5E" d="M45,1028.4v48.6c0,5.3,4.3,9.7,9.7,9.7s9.7-4.4,9.7-9.7v-48.6H45z"/><path fill="#96A5A6" d="M54.7,1028.4v4.9h4.9v-4.9H54.7z M54.7,1033.3h-4.9v4.9h4.9V1033.3z M54.7,1038.1v4.9h4.9v-4.9H54.7z M54.7,1043h-4.9v4.9h4.9V1043z M54.7,1047.8v4.9h4.9v-4.9H54.7z M54.7,1052.7h-4.9v4.9h4.9V1052.7z M54.7,1057.5v4.9h4.9v-4.9 H54.7z M54.7,1062.4h-4.9v4.9h4.9V1062.4z M54.7,1067.3v4.9h4.9v-4.9H54.7z M54.7,1072.1h-4.9v4.9h4.9V1072.1z M54.7,1077v4.9 c2.7,0,4.9-2.4,4.9-4.9H54.7z"/> <path fill="#ECF0F1" d="M49.9,1028.4v4.9h4.9v-4.9H49.9z M49.9,1038.1v4.9h4.9v-4.9H49.9z M49.9,1047.8v4.9h4.9v-4.9H49.9z M49.9,1057.5v4.9h4.9v-4.9H49.9z M49.9,1067.3v4.9h4.9v-4.9H49.9z M49.9,1077c0,2.4,2.2,4.9,4.9,4.9v-4.9H49.9z"/></g><path fill="#ECF0F1" d="M59.7,1081.8c-5.4,0-9.7,4.4-9.7,9.7v19.4c0,5.3,4.3,9.7,9.7,9.7s9.7-4.4,9.7-9.7v-19.4 C69.4,1086.2,65.1,1081.8,59.7,1081.8z M59.7,1086.7c2.7,0,4.9,1.9,4.9,4.9c0,2.4-2.2,4.9-4.9,4.9s-4.9-2.4-4.9-4.9 C54.9,1088.6,57,1086.7,59.7,1086.7z M59.7,1101.3c2.7,0,4.9,1.9,4.9,4.9v4.9c0,2.4-2.2,4.9-4.9,4.9s-4.9-2.4-4.9-4.9v-4.9 C54.9,1103.2,57,1101.3,59.7,1101.3z"/></g>';
$video-icon: '<polygon display="inline" opacity="0.8" fill="#{$icon-color}" points="79.8,72.9 125.8,98.2 79.5,122.8 "/>';
$gear-icon: '<path display="inline" opacity="0.8" fill="#{$icon-color}" d="M123.3,101.2c0.1-1,0.2-2,0.2-3.1c0-1.1-0.1-2.1-0.2-3.1l6.6-5.2c0.6-0.5,0.8-1.3,0.4-2 L124,77.1c-0.4-0.7-1.2-0.9-1.9-0.7l-7.8,3.1c-1.6-1.3-3.4-2.3-5.3-3.1l-1.2-8.3c-0.1-0.8-0.8-1.3-1.5-1.3H93.7 c-0.8,0-1.4,0.6-1.5,1.3L91,76.5c-1.9,0.8-3.7,1.8-5.3,3.1l-7.8-3.1c-0.7-0.3-1.5,0-1.9,0.7l-6.3,10.8c-0.4,0.7-0.2,1.5,0.4,2 l6.6,5.2c-0.1,1-0.2,2-0.2,3.1c0,1,0.1,2.1,0.2,3.1l-6.6,5.2c-0.6,0.5-0.8,1.3-0.4,2l6.3,10.8c0.4,0.7,1.2,0.9,1.9,0.7l7.8-3.1 c1.6,1.3,3.4,2.3,5.3,3.1l1.2,8.3c0.1,0.8,0.8,1.3,1.5,1.3h12.5c0.8,0,1.4-0.6,1.5-1.3l1.2-8.3c1.9-0.8,3.7-1.8,5.3-3.1l7.8,3.1 c0.7,0.3,1.5,0,1.9-0.7l6.3-10.8c0.4-0.7,0.2-1.5-0.4-2L123.3,101.2z M100,109.1c-6,0-11-4.9-11-11c0-6,4.9-11,11-11s11,4.9,11,11 C111,104.2,106,109.1,100,109.1z"/>';
$image-icon: '<path fill="#F1F1F1" d="M129.7,119.1V72.9c0-3.6-3-6.6-6.6-6.6H76.9c-3.6,0-6.6,3-6.6,6.6v46.2c0,3.6,3,6.6,6.6,6.6h46.2 C126.7,125.7,129.7,122.8,129.7,119.1z M88.4,101l8.3,9.9L108.3,96l14.9,19.8H76.9L88.4,101z"/>';

// icon with svg
$list:
(test, aac, $music-icon),
(test, abw, ""),
(test, arc, ""),
(test, avi, $video-icon),
(test, azw, ""),
(test, bin, $gear-icon),
(test, bz, $zip-icon),
(test, bz2, $zip-icon),
(test, csh, $gear-icon),
(test, css, $text-icon),
(test, csv, $text-icon),
(test, doc, $text-icon),
(test, eot, ""),
(test, epub, $text-icon),
(test, gif, $image-icon),
(test, html, $text-icon),
(test, ico, $image-icon),
(test, ics, ""),
(test, jar, $gear-icon);

////// DO-ICON MIXIN USAGE
/////
///// -> do-icon($background-color, $edge-color, $text, $text-color, $icon, $icon-color);
///// +> @include do-icon(#009688, lighten(#009688, 20%), "", "");
///
// $background-color: the background of the document image (A color is expected - REQUIRED)
// $edge-color: the color of corner edge
// $text: the type of mime type
// $text-color: the color of the text containing file extension (A color is expected)
// $icon: inject an icon inside the document model

@mixin do-icon($background-color, $edge-color:null, $text:null, $text-color:"#F1F2F2", $icon:null ) {
	
	@if (type-of($edge-color) != 'color') { $edge-color: lighten($background-color, 20%)}
	@if (type-of($text-color) != 'color') { $text-color: "#F1F2F2"}

	background-image: url('data:image/svg+xml;utf8,<svg class="icon-model" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200" enable-background="new 0 0 200 200" xml:space="preserve"> <path fill="#{$background-color}" d="M112.6,58.3V0.1H32.9C30.7,0.1,29,1.8,29,4 v192.2c0,2.1,1.7,3.9,3.9,3.9h134.2c2.1,0,3.9-1.7,3.9-3.9V58.3H112.6z"/> #{$icon} <text transform="matrix(1 0 0 1 100 171)" class="icon-text" text-anchor="middle" width="120" height="50" opacity="0.95" fill="#{$text-color}" font-family="Tahoma-Bold" style="font-family: Myriad Pro, Myriad, Tahoma-Bold, Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal;text-shadow: 0 1px 0 rgba(0,0,0,0.05);" font-size="#{$font-size}">#{$text}</text><polygon fill="#{$edge-color}" points="112.6,0 171,58.3 112.6,58.3"/><polygon opacity="0.1" fill="#010202" points="170.9,116.5 112.6,58.3 170.9,58.3"/></svg>');
}

////// basic css 
.demo {
	background-color: rgba(0,0,0,0.1);
	padding: 40px;
}

.mime-icon {
	margin: 0;
	display: inline-block;
	vertical-align:top;
	position: relative;
	.ico {
	position:relative;

$icon-container-size: 100px;
	
		&:before{
			position: absolute;
			top: $icon-container-size / 2.7;
			display:block;
			overflow: visible;
			width:100%;
			Height:100%;
			z-index:9;
			content:'';
			font-family: 'Material Icons';
			font-size: $icon-container-size / 4.2;
			color: $icon-color;
			opacity: 0.8;		
		}
		

		&:after{
			width: $icon-container-size;
			height: $icon-container-size;
			display:inline-block;
			content:'';

			background-size: 80%;
			background-position: center;
			background-repeat: no-repeat;
			@include do-icon(#009688);
		}
	}
	

	.ico-magenta:after { @include do-icon(#d9006c);}
	.ico-yellow:after {	@include do-icon(#f9ca15);}
	.ico-blue:after { @include do-icon(#0d75dd, "", "ABC");}
	
	i.material-icons {
		position: absolute;
		top: 33%;
		left: 0;
		right: 0;
		font-size: 28px;
		color: $icon-color;
		opacity: 0.8;
	}
}




////// "Each" n°1 icon with svg

$colors-number: length($icon-colours);
$actual-icon-color: 1;

@each $mimitype, $filetype, $icon in $list {

	  .mime-icon.#{$mimitype}.#{$filetype} .ico:after {
			@include do-icon(nth($icon-colours, $actual-icon-color), "", to-upper-case($filetype), "", $icon );
	  }

	  @if ($actual-icon-color <= ( $colors-number - 1 ) ) {
	  	$actual-icon-color: $actual-icon-color + 1;
		
		@if ($actual-icon-color > $colors-number) {
			$actual-icon-color: $actual-icon-color - $colors-number;
		}
		
	  } @else {
	  	$actual-icon-color: 1;
	  }
}



////// "Each" n°1 icon with Google font icon
$colors-number: length($icon-colours);
$actual-icon-color: 1;

@each $mimitype, $filetype, $icon-background-color, $icon in $list2 {
		
	@if (type-of($icon-background-color) != 'color') {  // if background isn't a color
		$icon-background-color: nth($icon-colours, $actual-icon-color); // the color is a color from the $icon-colours array
		
		@if ($actual-icon-color < $colors-number  ) { // Prepare the next color then increase the index counter 
			$actual-icon-color: $actual-icon-color + (($colors-number / 2) - 1); 
			@if ($actual-icon-color > $colors-number ) {
				$actual-icon-color: $actual-icon-color - ($colors-number - 1);
			}
		} @else {
			$actual-icon-color: 1;
		}
	}
	// STYLE
	.mime-icon.#{$mimitype}.#{$filetype} .ico:after {
		@include do-icon($icon-background-color, "", to-upper-case($filetype), "", $icon );
	}
	.mime-icon.#{$mimitype}.#{$filetype} .ico:before {
		content:$icon;
	}
}



// HARDCODED styles
.mime-icon {
	&._3ds .ico:after { @include do-icon(desaturate(#4CAF50, 15%), "", "3DS");}
	&.bin .ico:after  { @include do-icon(desaturate(#8BC34A, 15%), "", "BIN");}
	&.cad .ico:after  { @include do-icon(desaturate(#CDDC39, 15%), "", "CAD");}
	&.drw .ico:after  { @include do-icon(desaturate(#FFC107, 15%),  "", "DRW");}
	&.dxf .ico:after  { @include do-icon(desaturate(#F44336, 15%),  "", "DXF");}
	&.dwf .ico:after  { @include do-icon(desaturate(#E91E63, 15%),  "", "DWF");}
	&.skp .ico:after  { @include do-icon(desaturate(#9C27B0, 15%),  "", "SKP");}
	&.pipe .ico:after { @include do-icon(desaturate(#3F51B5, 15%),  "", "PIPE");}

	&.audio {
		&.mp3 .ico:after { @include do-icon(desaturate(#05ad9d, 15%), "", "MP3", "", $music-icon );}
		&.pcm .ico:after { @include do-icon(desaturate(#8BC34A, 15%), "", "PCM", "", $music-icon );}
		&.ogg .ico:after { @include do-icon(desaturate(#CDDC39, 15%), "", "OGG", "", $music-icon );}
		&.wav .ico:after { @include do-icon(desaturate(#FFC107, 15%), "", "WAV", "", $music-icon );}
		&.aac .ico:after { @include do-icon(desaturate(#F44336, 15%), "", "AAC", "", $music-icon );}
		&.aiff .ico:after{ @include do-icon(desaturate(#E91E63, 15%), "", "AIFF", "", $music-icon );}
		&.wma .ico:after { @include do-icon(desaturate(#9C27B0, 15%), "", "WMA", "", $music-icon );}
		&.flac .ico:after{ @include do-icon(desaturate(#3F51B5, 15%), "", "FLAC", "", $music-icon );}
	}

	&.text {
		&.csv .ico:after { @include do-icon(#b8385f, "", "CSV", "", $text-icon );}
		&.txt .ico:after { @include do-icon(#3dabb4, "", "TXT", "", $text-icon );}
		&.rtf .ico:after { @include do-icon(#ac4493, "", "RTF", "", $text-icon );}
		&.doc .ico:after { @include do-icon(#4a76db, "", "DOC", "", $text-icon );}
		&.docx .ico:after{ @include do-icon(#6863c2, "", "DOCX", "", $text-icon );}
		&.html .ico:after{ @include do-icon(#d65f58, "", "HTML", "", $text-icon );}
		&.js  .ico:after { @include do-icon(#c03f60, "", "JS", "", $text-icon );}
		&.php .ico:after { @include do-icon(#7dbe4e, "", "PHP", "", $text-icon );}
	}

	&.compressed {
		&.zip .ico:after { @include do-icon(hsla(37, 95%, 50%, 1), "", "ZIP", "", $zip-icon );}
		&.iso .ico:after { @include do-icon(hsla(339, 70%, 50%, 1), "", "ISO", "", $zip-icon );}
		&.x-7z .ico:after { @include do-icon(hsl(174, 50%, 40%), "", "7ZIP", "", $zip-icon );}
		&.rar .ico:after { @include do-icon(hsl(261, 70%, 50%), "", "RAR", "", $zip-icon );}
	}

	&.video {
		&.avi .ico:after { @include do-icon(#bece25, "", "AVI", "", $video-icon);}
		&.mp4 .ico:after { @include do-icon(#E91E63, "", "MP4", "", $video-icon);}
		&.mkv .ico:after { @include do-icon(#4CAF50, "", "MKV", "", $video-icon);}
		&.mpeg .ico:after { @include do-icon(#03A9F4, "", "MPEG", "", $video-icon);}
		&.mov .ico:after { @include do-icon(#596bd0, "", "MOV", "", $video-icon);}
		&.flv .ico:after { @include do-icon(#9C27B0, "", "FLV", "", $video-icon);}
		&.swf .ico:after { @include do-icon(#F44336, "", "SWF", "", $video-icon);}
		&.wmv .ico:after { @include do-icon(#FFC107, "", "WMV", "", $video-icon);}
	}

	&.white {
		$icon-color: "#666666";
		$music-icon: '<path display="inline" opacity="0.8" fill="#999" d="M127.9,66.6c-0.4-0.4-0.9-0.5-1.5-0.4L93,70.6c-0.9,0.1-1.6,0.9-1.6,1.8V79v2.7v26.8 c-2.2-1.9-5.1-3.1-8.4-3.1c-6.7,0-12.1,4.9-12.1,10.9c0,6,5.4,10.9,12.1,10.9s12.1-4.9,12.1-10.9V83.3l29.7-3.9v19.3 c-2.1-1.8-4.9-2.9-8-2.9c-6.5,0-11.8,4.8-11.8,10.7s5.3,10.7,11.8,10.7c6.5,0,11.8-4.8,11.8-10.7V77.3v-2.7V68 C128.5,67.5,128.3,67,127.9,66.6z"/>';
		.ico:after {
			filter: drop-shadow( 0 2px 2px rgba(0, 0, 0, 0.25) );
		}
		&.mp3 .ico:after { @include do-icon(#f1f2f2, desaturate(#05ad9d, 15%), "MP3", #888, $music-icon );}
		&.pcm .ico:after { @include do-icon(#f1f2f2,desaturate(#8BC34A, 15%), "PCM", #888, $music-icon );}
		&.ogg .ico:after { @include do-icon(#f1f2f2,desaturate(#CDDC39, 15%), "OGG", #888, $music-icon );}
		&.wav .ico:after { @include do-icon(#f1f2f2,desaturate(#FFC107, 15%), "WAV", #888, $music-icon );}
		&.aac .ico:after { @include do-icon(#f1f2f2,desaturate(#F44336, 15%), "AAC", #888, $music-icon );}
		&.aiff .ico:after { @include do-icon(#f1f2f2,desaturate(#E91E63, 15%), "AIFF", #888, $music-icon );}
		&.wma .ico:after { @include do-icon(#f1f2f2,desaturate(#9C27B0, 15%), "WMA", #888, $music-icon );}
		&.flac .ico:after { @include do-icon(#f1f2f2,desaturate(#3F51B5, 15%), "FLAC", #888, $music-icon );}
	}
	
	&.dark {
		&.csv .ico:after { @include do-icon(#3a3b3c, desaturate(#05ad9d, 15%), "CSV", #ddd, $text-icon );}
		&.txt .ico:after { @include do-icon(#3a3b3c,desaturate(#8BC34A, 15%), "TXT", #ddd, $text-icon );}
		&.rtf .ico:after { @include do-icon(#3a3b3c,desaturate(#CDDC39, 15%), "RTF", #ddd, $text-icon );}
		&.doc .ico:after { @include do-icon(#3a3b3c,desaturate(#FFC107, 15%), "DOC", #ddd, $text-icon );}
		&.docx .ico:after { @include do-icon(#3a3b3c,desaturate(#F44336, 15%), "DOCX", #ddd, $text-icon );}
		&.html .ico:after { @include do-icon(#3a3b3c,desaturate(#E91E63, 15%), "HTML", #ddd, $text-icon );}
		&.js  .ico:after { @include do-icon(#3a3b3c,desaturate(#9C27B0, 15%), "JS", #ddd, $text-icon );}
		&.php  .ico:after { @include do-icon(#3a3b3c,desaturate(#3F51B5, 15%), "PHP", #ddd, $text-icon );}
	}

	&.double {
		.ico:after {
			filter: drop-shadow( 0 0 2px rgba(0, 0, 0, 0.2) );
		}		
		&.avi .ico:after { @include do-icon(#F44336, #3a3b3c, "AVI", #f1f2f2, $video-icon);}
		&.mp4 .ico:after { @include do-icon(#8BC34A, #3a3b3c, "MP4", #f1f2f2, $video-icon);}
		&.mkv .ico:after { @include do-icon(#bdcc2b, #3a3b3c, "MKV", #f1f2f2, $video-icon);}
		&.mpeg .ico:after{ @include do-icon(#FFC107, #3a3b3c, "MPEG", #f1f2f2, $video-icon);}
		&.mov .ico:after { @include do-icon(#05ad9d, #3a3b3c, "MOV", #f1f2f2, $video-icon);}
		&.flv .ico:after { @include do-icon(#E91E63, #3a3b3c, "FLV", #f1f2f2, $video-icon);}
		&.swf .ico:after { @include do-icon(#9C27B0, #3a3b3c, "SWF", #f1f2f2, $video-icon);}
		&.wmv .ico:after { @include do-icon(#8BC34A, #3a3b3c, "WMV", #f1f2f2, $video-icon);}
	}
}


